
  if [ -e qtbase/src/corelib/Qt5CoreMacros.cmake ]
  then
     cd qtbase
	sed -i -e "s|^\(QMAKE_CFLAGS_RELEASE.*\)|\1 ${CFLAGS}|" \
    		mkspecs/common/gcc-base.conf
  	sed -i -e "s|^\(QMAKE_LFLAGS_RELEASE.*\)|\1 ${LDFLAGS}|" \
    		mkspecs/common/g++-unix.conf
	wget https://code.qt.io/cgit/qt/qtbase.git/patch/?id=f8f0f3ee -O qt-delayed-highlight.patch
	wget https://code.qt.io/cgit/qt/qtbase.git/patch/?id=fcba9fa8 -O qtbug-69310.patch
	wget http://code.qt.io/cgit/qt/qtbase.git/patch?id=97600d2c - O qt5-base-nouveau-freeze.patch
  patch -p1 -i qt-delayed-highlight.patch # https://codereview.qt-project.org/#/c/249881/
	sleep 4
  patch -p1 -i qtbug-69310.patch # https://bugreports.qt.io/browse/QTBUG-69310
	sleep 4
  patch -Rp1 -i qt5-base-nouveau-freeze.patch
	sleep 4
     cd ..
#    [ ! -e Makefile ] && 
./configure -confirm-license -opensource -v \
    -prefix $HOME/$ARCH \
    -docdir $HOME/$ARCH/share/doc/qt \
    -headerdir $HOME/$ARCH/include/qt \
    -archdatadir $HOME/$ARCH/lib/qt \
    -datadir $HOME/$ARCH/share/qt \
    -sysconfdir $HOME/$ARCH/xdg \
    -examplesdir $HOME/$ARCH/share/doc/qt/examples \
    -plugin-sql-sqlite \
    -system-sqlite \
    -openssl-linked \
    -nomake examples \
    -no-rpath \
    -optimized-qmake \
    -dbus-linked \
    -no-use-gold-linker \
    -reduce-relocations -webengine-icu || exit 1
	make || exit 1
	make install || exit 1
    touch buildok-$ARCH
    exit 0
  fi
